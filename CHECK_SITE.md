# ‚úÖ –ü–†–û–í–ï–†–ö–ê –°–ê–ô–¢–ê –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è CORS –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. ‚úÖ –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
2. ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞
3. ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üîç –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã:

```bash
docker-compose -f docker-compose.prod.yml ps
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
NAME                    STATE       PORTS
labosfera_backend_1     Up         
labosfera_frontend_1    Up         
labosfera_nginx_1       Up          0.0.0.0:80->80/tcp, 0.0.0.0:443->443/tcp
labosfera_db_1          Up
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å FRONTEND_URL:

```bash
docker-compose -f docker-compose.prod.yml exec backend env | grep FRONTEND_URL
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
FRONTEND_URL=https://labosfera.ru
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
docker-compose -f docker-compose.prod.yml exec backend python manage.py shell << 'EOF'
from django.conf import settings
print("‚úÖ CORS_ALLOWED_ORIGINS:")
for origin in settings.CORS_ALLOWED_ORIGINS:
    print(f"  - {origin}")
print("\n‚úÖ CSRF_TRUSTED_ORIGINS:")
for origin in settings.CSRF_TRUSTED_ORIGINS:
    print(f"  - {origin}")
EOF
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ CORS_ALLOWED_ORIGINS:
  - https://labosfera.ru
  - https://www.labosfera.ru
  - http://localhost:3000
  - http://127.0.0.1:3000

‚úÖ CSRF_TRUSTED_ORIGINS:
  - https://labosfera.ru
  - https://www.labosfera.ru
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API endpoint:

```bash
curl -X POST http://localhost/api/v1/contacts/ \
  -H "Content-Type: application/json" \
  -H "Origin: https://labosfera.ru" \
  -d '{"name":"Test Server","phone":"1234567890","email":"test@test.com","organization":"Test Org","comment":"Test from server"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å: 200 –∏–ª–∏ 201
- –î–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- **–í–ê–ñ–ù–û:** –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!

---

## üåê –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** https://labosfera.ru
2. **–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑** –¥–æ —Ä–∞–∑–¥–µ–ª–∞ "–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é"
3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:**
   - –ò–º—è: –¢–µ—Å—Ç
   - –¢–µ–ª–µ—Ñ–æ–Ω: 79991234567
   - Email: test@example.com
   - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: –¢–µ—Å—Ç–æ–≤–∞—è
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. **–ù–∞–∂–º–∏—Ç–µ:** "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º..."

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå –ù–ï–¢ –æ—à–∏–±–∫–∏ "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ–±—Ä–∞—â–µ–Ω–∏—è"
- ‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
- ‚úÖ –§–æ—Ä–º–∞ –æ—á–∏—â–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–∏—Ö–æ–¥–∏—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–∞—Ç 300596362)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** https://labosfera.ru
2. **–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ú–∏–∫—Ä–æ—Å–∫–æ–ø")
3. **–ù–∞–∂–º–∏—Ç–µ:** "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"
4. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ—Ä–∑–∏–Ω—É** (–∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –¢–æ–≤–∞—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω–µ
   - ‚úÖ –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (+/-)
   - ‚úÖ –¶–µ–Ω–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
6. **–ù–∞–∂–º–∏—Ç–µ:** "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
7. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∑–∞–∫–∞–∑–∞:**
   - –§–ò–û: –¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤–∏—á
   - –¢–µ–ª–µ—Ñ–æ–Ω: 79991234567
   - Email: test@example.com
   - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
   - –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: –ú–æ—Å–∫–≤–∞, –¢–µ—Å—Ç–æ–≤–∞—è 1
8. **–ù–∞–∂–º–∏—Ç–µ:** "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑"

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–∏—Ö–æ–¥–∏—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ DevTools (F12)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** https://labosfera.ru
2. **–ù–∞–∂–º–∏—Ç–µ F12** (–æ—Ç–∫—Ä—ã—Ç—å DevTools)
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console**
4. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É**

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå –ù–ï–¢ CORS –æ—à–∏–±–æ–∫ (—Ç–∏–ø–∞ "has been blocked by CORS policy")
- ‚ùå –ù–ï–¢ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏ (Network errors)
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –∫ API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200 OK

**–í–∫–ª–∞–¥–∫–∞ Network:**
1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ Network**
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É**
3. **–ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ /api/v1/contacts/**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞:**
   - ‚úÖ `Access-Control-Allow-Origin: https://labosfera.ru`
   - ‚úÖ `Access-Control-Allow-Methods: POST, OPTIONS, ...`

---

## üì± –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker-compose -f docker-compose.prod.yml exec backend env | grep TELEGRAM
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
TELEGRAM_BOT_TOKEN=8355662949:AAGUHPivIaYcsJlyve3iEaoRdvuVvJhQQ8w
TELEGRAM_CHAT_ID=300596362
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
docker-compose -f docker-compose.prod.yml exec backend python manage.py shell << 'EOF'
from orders.utils import send_telegram_notification
result = send_telegram_notification("üß™ –¢–µ—Å—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è CORS")
print(f"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
EOF
```

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—ã–≤–æ–¥–∏—Ç—Å—è: `‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: True`
- –ü—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram (—á–∞—Ç ID: 300596362)

---

## üìä –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### –õ–æ–≥–∏ backend (–æ—à–∏–±–∫–∏):

```bash
docker-compose -f docker-compose.prod.yml logs backend | grep -i error | tail -20
```

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç CORS –æ—à–∏–±–æ–∫

### –õ–æ–≥–∏ nginx (–¥–æ—Å—Ç—É–ø):

```bash
docker-compose -f docker-compose.prod.yml logs nginx | tail -20
```

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å—ã –∫ API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200/201

### –ñ–∏–≤—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã:

```bash
# –û—Ç–∫—Ä—ã—Ç—å –∂–∏–≤—ã–µ –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs -f backend

# –í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É
# –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å POST –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –æ—à–∏–±–æ–∫
# Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞
```

---

## üéØ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

### Backend:
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω (State: Up)
- ‚úÖ FRONTEND_URL=https://labosfera.ru
- ‚úÖ CORS –≤–∫–ª—é—á–∞–µ—Ç labosfera.ru
- ‚úÖ CSRF –≤–∫–ª—é—á–∞–µ—Ç labosfera.ru
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ /api/v1/

### Frontend:
- ‚úÖ –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å)
- ‚úÖ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ—Ç CORS –æ—à–∏–±–æ–∫ –≤ DevTools Console

### Telegram:
- ‚úÖ –ë–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—Ç–æ–∫–µ–Ω –∏ chat_id)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

### SSL:
- ‚úÖ –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ HTTPS
- ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω (–¥–æ 6 –º–∞—è 2026)
- ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –§–æ—Ä–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ FRONTEND_URL (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å https://labosfera.ru)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å labosfera.ru)
3. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker-compose -f docker-compose.prod.yml logs backend`

### Telegram –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞: `docker-compose -f docker-compose.prod.yml exec backend env | grep TELEGRAM`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ shell (—Å–º. –≤—ã—à–µ)

### –ö–æ—Ä–∑–∏–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DevTools Console –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –Ω–∞ CORS –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API /api/v1/cart/ –¥–æ—Å—Ç—É–ø–µ–Ω

---

## ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –æ—Ç–º–µ—á–µ–Ω—ã ‚úÖ - **–ü–û–ó–î–†–ê–í–õ–Ø–ï–ú!** üéâ

–°–∞–π—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ ‚úÖ
- –ö–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞–∫–∞–∑—ã ‚úÖ
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚úÖ
- SSL –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚úÖ

---

**–°–æ–∑–¥–∞–Ω–æ: 6 –æ–∫—Ç—è–±—Ä—è 2025**  
**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–∞: 787fe1d**
