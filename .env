# ЛАБОСФЕРА - Конфигурация для Timeweb Cloud
# Оптимизировано для Ubuntu 24.04 LTS, NVMe дисков и гигабитного канала

# =================================================================
# ОСНОВНЫЕ НАСТРОЙКИ
# =================================================================

# Режим отладки (ВСЕГДА False для production)
DEBUG=False

# Секретный ключ Django (ОБЯЗАТЕЛЬНО ИЗМЕНИТЕ!)
DJANGO_SECRET_KEY=yL8-b-z-q-w-e-r-t-y-u-i-o-p-a-s-d-f-g-h-j-k-l

# Разрешенные хосты (добавьте ваш домен и IP)
DJANGO_ALLOWED_HOSTS=labosfera.ru,www.labosfera.ru,127.0.0.1,localhost

# =================================================================
# ДОМЕН И SSL
# =================================================================

# Основной домен (измените на ваш)
DOMAIN=labosfera.ru

# Email для Let's Encrypt SSL сертификата
EMAIL=admin@labosfera.ru

# =================================================================
# БАЗА ДАННЫХ POSTGRESQL
# =================================================================

# Настройки PostgreSQL (оптимизировано для Timeweb Cloud)
POSTGRES_DB=labosfera_db
POSTGRES_USER=labosfera_user
POSTGRES_PASSWORD=GgHhJjKkLl12345

# URL подключения к базе
DATABASE_URL=postgresql://labosfera_user:GgHhJjKkLl12345@db:5432/labosfera_db

# Оптимизация подключений для Timeweb Cloud
DATABASE_CONN_MAX_AGE=600
DATABASE_POOL_SIZE=20
DATABASE_TIMEOUT=30

# =================================================================
# CORS И CSRF (безопасность)
# =================================================================

# Разрешенные источники для CORS (HTTPS для production)
CORS_ALLOWED_ORIGINS=https://labosfera.ru,https://www.labosfera.ru

# Доверенные источники для CSRF (HTTPS для production)
CSRF_TRUSTED_ORIGINS=https://labosfera.ru,https://www.labosfera.ru

# =================================================================
# API И ФРОНТЕНД
# =================================================================

# URL API для фронтенда (HTTPS для production)
# Без /api в конце, т.к. код добавляет /api/v1/...
NEXT_PUBLIC_API_URL=https://labosfera.ru

# Настройки Next.js (HTTPS для production)
NEXT_PUBLIC_SITE_URL=https://labosfera.ru
NEXTAUTH_URL=https://labosfera.ru
NEXTAUTH_SECRET=your-nextauth-secret-here

# =================================================================
# EMAIL НАСТРОЙКИ
# =================================================================

# SMTP настройки (по умолчанию Yandex)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.yandex.ru
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=

# Отправитель по умолчанию
DEFAULT_FROM_EMAIL=noreply@labosfera.ru

# =================================================================
# TELEGRAM УВЕДОМЛЕНИЯ (опционально)
# =================================================================

# Бот для уведомлений о заказах
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# =================================================================
# ОПТИМИЗАЦИЯ ДЛЯ TIMEWEB CLOUD
# =================================================================

# Флаг оптимизации для Timeweb
TIMEWEB_OPTIMIZED=true

# Использование Redis (отключено по умолчанию)
USE_REDIS_CACHE=false

# Настройки кэширования
CACHE_TTL=300
CACHE_MAX_ENTRIES=10000

# Настройки сессий
SESSION_COOKIE_AGE=86400
SESSION_SAVE_EVERY_REQUEST=False

# =================================================================
# ФАЙЛЫ И МЕДИА
# =================================================================

# URL для статических файлов
STATIC_URL=/static/

# URL для медиа файлов
MEDIA_URL=/media/

# Максимальный размер загружаемых файлов
DATA_UPLOAD_MAX_MEMORY_SIZE=10485760
FILE_UPLOAD_MAX_MEMORY_SIZE=5242880

# =================================================================
# ЛОГИРОВАНИЕ
# =================================================================

# Уровень логирования
LOG_LEVEL=INFO

# Отключение Debug Toolbar в production
ENABLE_DEBUG_TOOLBAR=False

# =================================================================
# БЕЗОПАСНОСТЬ
# =================================================================

# HTTPS принудительно
SECURE_SSL_REDIRECT=True

# HSTS настройки
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# Дополнительная безопасность
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_REFERRER_POLICY=strict-origin-when-cross-origin

# Безопасные cookies
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
CSRF_COOKIE_HTTPONLY=True

# =================================================================
# ЛОКАЛИЗАЦИЯ
# =================================================================

# Язык по умолчанию
LANGUAGE_CODE=ru-ru

# Часовой пояс
TIME_ZONE=Europe/Moscow

# Интернационализация
USE_I18N=True
USE_L10N=True
USE_TZ=True

# =================================================================
# ПРОИЗВОДИТЕЛЬНОСТЬ TIMEWEB CLOUD
# =================================================================

# Оптимизация для NVMe дисков
ENABLE_STATIC_FILE_SERVING=True
STATICFILES_STORAGE=django.contrib.staticfiles.storage.ManifestStaticFilesStorage

# Оптимизация для гигабитного канала
CONN_MAX_AGE=60
ATOMIC_REQUESTS=False

# Настройки для высокой нагрузки
ALLOWED_UPLOAD_EXTENSIONS=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx
MAX_UPLOAD_SIZE=52428800

# =================================================================
# МОНИТОРИНГ И ЗДОРОВЬЕ
# =================================================================

# Health check endpoint
HEALTH_CHECK_URL=/api/health/

# Метрики
ENABLE_METRICS=True
METRICS_ENDPOINT=/api/metrics/

# =================================================================
# РАЗРАБОТКА (только для тестирования)
# =================================================================

# Режим разработки (ТОЛЬКО для локальной разработки!)
DEV_MODE=False

# Debug настройки (ТОЛЬКО для разработки!)
DEBUG_PROPAGATE_EXCEPTIONS=False
INTERNAL_IPS=127.0.0.1,localhost

# =================================================================
# ДОПОЛНИТЕЛЬНЫЕ НАСТРОЙКИ
# =================================================================

# Название сайта
SITE_NAME=ЛАБОСФЕРА
SITE_DESCRIPTION=Интернет-магазин лабораторного оборудования

# SEO настройки
META_KEYWORDS=лабораторное оборудование,научные приборы,лаборатория
META_DESCRIPTION=ЛАБОСФЕРА - современный интернет-магазин лабораторного оборудования и научных приборов

# Социальные сети
SOCIAL_VK=
SOCIAL_TELEGRAM=
SOCIAL_INSTAGRAM=

# Google Analytics
GOOGLE_ANALYTICS_ID=
YANDEX_METRIKA_ID=

# =================================================================
# ПРИМЕЧАНИЯ ДЛЯ АДМИНИСТРАТОРА
# =================================================================

# 1. ОБЯЗАТЕЛЬНО измените:
#    - DJANGO_SECRET_KEY (сгенерируйте новый на https://djecrety.ir/)
#    - POSTGRES_PASSWORD (используйте сильный пароль)
#    - EMAIL (ваш реальный email)
#    - DOMAIN (ваш домен)

# 2. Для email уведомлений настройте:
#    - EMAIL_HOST_USER (ваш email)
#    - EMAIL_HOST_PASSWORD (пароль от email)

# 3. Для Telegram уведомлений:
#    - Создайте бота через @BotFather
#    - Получите TELEGRAM_BOT_TOKEN
#    - Узнайте TELEGRAM_CHAT_ID

# 4. Для аналитики:
#    - Настройте Google Analytics
#    - Настройте Яндекс.Метрику

# =================================================================
# ФИНАЛЬНАЯ ПРОВЕРКА
# =================================================================

# Перед запуском убедитесь:
# ✅ DJANGO_SECRET_KEY изменен
# ✅ POSTGRES_PASSWORD изменен  
# ✅ EMAIL настроен
# ✅ DOMAIN правильный
# ✅ ALLOWED_HOSTS содержит ваш домен
# ✅ DEBUG=False
# ✅ Все пароли сильные